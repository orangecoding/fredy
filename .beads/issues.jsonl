{"id":"fredy-ch-08j","title":"Set up PR workflow and branch protection","description":"Configure protected main branch workflow:\n\n1. Update CLAUDE.md with PR workflow requirement (like RewardStack2)\n2. Protect main branch on GitHub (require PRs)\n3. Create dedicated beads-sync branch for bd sync commits\n4. Update beads workflow to sync to beads-sync branch instead of main","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-11T16:35:22.953415+01:00","created_by":"gabko14","updated_at":"2026-01-11T17:30:39.357672+01:00","closed_at":"2026-01-11T17:30:39.357672+01:00","close_reason":"PR merged, branch protection and beads-sync workflow in place"}
{"id":"fredy-ch-3v3","title":"Remove or disable German providers","description":"Clean up German providers that are not relevant for Swiss fork.\n\nCurrent German providers to handle:\n- immoscout.js (German ImmoScout24.de)\n- immowelt.js\n- immonet.js\n- kleinanzeigen.js (eBay Kleinanzeigen Germany)\n- wgGesucht.js\n- sparkasse.js\n- mcMakler.js\n- neubauKompass.js\n- regionalimmobilien24.js\n- immoswp.js\n- einsAImmobilien.js\n- immobilienDe.js\n- ohneMakler.js\n\nAlso handle:\n- German test files in test/provider/*.test.js\n- German URLs in test/provider/testProvider.json\n- Any German-specific documentation\n\nOptions:\n1. Delete files entirely (clean but loses reference)\n2. Move to lib/provider/deprecated/ (keeps for reference)\n3. Add 'enabled: false' flag (keeps working but hidden)\n\nRecommendation: Option 2 - move to deprecated folder. Keeps code as reference patterns.\n\n‚è±Ô∏è TIMING: Do this AFTER at least one Swiss provider works, so we can reference German code during development.","status":"closed","priority":2,"issue_type":"chore","created_at":"2026-01-08T21:46:09.2769769+01:00","created_by":"GLi","updated_at":"2026-01-11T16:18:26.722325+01:00","closed_at":"2026-01-11T16:18:26.722325+01:00","close_reason":"German providers moved to deprecated folder, Swiss providers (flatfox, immoscout24ch) remain active"}
{"id":"fredy-ch-5ca","title":"Set up GitHub-based deployment for Railway","description":"Currently using 'railway up' which uploads directly. Connecting Railway to GitHub would auto-deploy on push and be cleaner CI/CD.","status":"closed","priority":3,"issue_type":"chore","created_at":"2026-01-11T16:32:18.11299+01:00","created_by":"gabko14","updated_at":"2026-01-12T11:36:25.889723+01:00","closed_at":"2026-01-12T11:36:25.889723+01:00","close_reason":"GitHub auto-deploy configured via Railway dashboard. Deploys to production on push to master after CI passes."}
{"id":"fredy-ch-5r8","title":"Fix ImmoScout24.ch URL construction for non-flat property types","description":"The ImmoScout24.ch provider hardcodes 'flat' in listing URLs:\n\n```javascript\nconst link = `https://www.immoscout24.ch/en/d/flat-${offerType}-${locality}/${listingId}`;\n```\n\nThis breaks for houses, commercial properties, parking spaces, etc. The URL will 404 for non-flat listings.\n\n**Fix options:**\n1. Use the actual property type from `listing.categories[]` (APARTMENT, HOUSE, PARKING, etc.)\n2. Use a simpler URL format that works for all types: `/en/d/${offerType}/${listingId}`\n\nThe categories array from __INITIAL_STATE__ contains values like `[\"APARTMENT\", \"FLAT\"]` which could map to URL segments.\n\n**Location:** `lib/provider/immoscout24ch.js` line ~104 in `transformListing()`","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T18:01:27.924283+01:00","created_by":"gabko14","updated_at":"2026-01-11T18:05:48.954793+01:00","closed_at":"2026-01-11T18:05:48.954793+01:00","close_reason":"Fixed in PR #4 - added getPropertyTypeSlug() and sanitizeLocality() with 31 unit tests"}
{"id":"fredy-ch-6qx","title":"Implement anibis.ch provider (free classifieds)","description":"Create a provider for anibis.ch, Switzerland's free classifieds platform (owned by SMG).\n\nGood for bargain hunting because:\n- Free to list = more private landlords\n- Less commercial than Homegate/ImmoScout\n- ~68,000+ listings across categories\n- Often has sublets and direct rentals\n\nTechnical notes:\n- SMG-owned (same parent as Homegate)\n- May have simpler HTML than major portals\n- Base URL: https://www.anibis.ch/de/immobilien","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-08T21:46:21.6191383+01:00","created_by":"GLi","updated_at":"2026-01-12T17:30:11.839467+01:00","closed_at":"2026-01-12T17:30:11.839467+01:00","close_reason":"Implemented Anibis.ch provider. Uses Next.js SSR data extraction (no Puppeteer needed). Test passes with 30 listings found."}
{"id":"fredy-ch-7k8","title":"Investigate ImmoScout24.ch provider not returning listings","description":"Provider returns 0 listings while website shows ~50 results for the same URL. Possible causes:\n- Extraction selectors changed\n- Anti-bot detection (DataDome captcha)\n- __INITIAL_STATE__ structure changed\n- URL construction issue","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-12T11:01:34.908698+01:00","created_by":"gabko14","updated_at":"2026-01-12T12:06:43.166233+01:00","closed_at":"2026-01-12T12:06:43.166233+01:00","close_reason":"Duplicate of fredy-ch-j01"}
{"id":"fredy-ch-7qi","title":"Add pagination support to ImmoScout24.ch provider","description":"Currently the ImmoScout24.ch provider only extracts listings from the first page (~20 items from __INITIAL_STATE__).\n\n**Current behavior:**\n- Fetches single page via Bright Data\n- Extracts ~20 listings from __INITIAL_STATE__\n- Works fine for periodic monitoring (catches new listings as they appear)\n\n**Enhancement:**\n- Loop through pages (?pn=1, ?pn=2, etc.) until no more results\n- Useful for initial sync or users who want comprehensive coverage\n- Consider rate limiting to avoid excessive Bright Data costs\n\n**Note:** Low priority since Fredy's primary use case (monitoring for NEW listings) works fine with page 1 only when sorted by dateCreated-desc.","status":"open","priority":3,"issue_type":"feature","owner":"gabkolistiak@gmail.com","created_at":"2026-01-12T17:24:50.173543+01:00","created_by":"Gabko14","updated_at":"2026-01-12T17:24:59.624436+01:00"}
{"id":"fredy-ch-7tj","title":"Add 2Captcha DataDome solver integration","description":"Integrate 2Captcha SDK for solving DataDome captchas. This is needed as a fallback when residential proxy alone isn't enough. Should detect captcha pages, send to 2Captcha API, and return solved cookies.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-11T00:52:29.579435+01:00","created_by":"gabko14","updated_at":"2026-01-11T02:16:35.630561+01:00","closed_at":"2026-01-11T02:16:35.630561+01:00","close_reason":"2Captcha DataDome solver integration complete. Added dataDomeSolver.js service, integrated into puppeteerExtractor, and added UI for API key configuration. Ready for testing."}
{"id":"fredy-ch-8hd","title":"Set up Playwright MCP for scraper development","description":"Set up Playwright MCP to enable interactive scraper development and testing.\n\nThis allows Claude to:\n- Open real websites (Flatfox, ImmoScout24.ch, etc.)\n- Inspect HTML structure and test CSS selectors live\n- Verify extraction logic before writing provider code\n- Debug scrapers interactively instead of blind coding\n\nCopy from Lebenslauf-Generator project:\n- Claude workflows and their configurations\n- Prompting patterns\n- Relevant CLAUDE.md sections\n- Playwright MCP config\n\nThis is a prerequisite for efficient scraper development - without it we're guessing at selectors.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-08T22:54:49.4163252+01:00","created_by":"GLi","updated_at":"2026-01-08T23:14:18.1512356+01:00","closed_at":"2026-01-08T23:14:18.1512356+01:00","close_reason":"Set up Playwright MCP: added .claude/settings.json, GitHub workflows (claude.yml, claude-code-review.yml), updated .gitignore and CLAUDE.md"}
{"id":"fredy-ch-8l5","title":"Flatfox only shows top 2 listings instead of all 6+","status":"closed","priority":1,"issue_type":"bug","owner":"gabkolistiak@gmail.com","created_at":"2026-01-15T00:11:17.490495+01:00","created_by":"Gabko14","updated_at":"2026-01-15T23:27:59.115406+01:00","closed_at":"2026-01-15T23:27:59.115406+01:00","close_reason":"Not a bug - provider works correctly. Investigation showed: (1) Provider returns 12 listings for the URL, (2) Flatfox website dynamically expands map bounds showing more, (3) Fredy only shows NEW listings so repeat runs show fewer. Expected behavior."}
{"id":"fredy-ch-99s","title":"Investigate Flatfox provider missing listings","description":"The Flatfox provider is not returning all available listings.\n\n**Reproduction:**\nURL configured: https://flatfox.ch/en/search/?attribute=parkingspace\u0026east=7.633542\u0026is_swap=false\u0026max_price=1700\u0026min_rooms=4\u0026moving_date_from=2026-03-01\u0026north=47.124589\u0026object_category=APARTMENT\u0026offer_type=RENT\u0026ordering=date\u0026place_name=Bern%2C%20Bern%2C%20Switzerland\u0026place_type=place\u0026query=Bern%2C%20Bern%2C%20Switzerland\u0026south=46.750970\u0026take=48\u0026west=7.249718\n\n**Expected:** ~20 listings (as shown on the Flatfox website)\n**Actual:** Only ~10 listings returned\n\n**Investigation needed:**\n- Check if the provider is correctly parsing pagination\n- Verify API response vs what we're extracting\n- Check if some listings are being filtered out incorrectly","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-12T11:01:57.449415+01:00","created_by":"gabko14","updated_at":"2026-01-12T11:09:33.013865+01:00","closed_at":"2026-01-12T11:09:33.013865+01:00","close_reason":"Fixed API parameter names (min_rooms/max_price instead of rooms_from/price_to) and increased max_count from 100 to 400. Provider now returns correct results. Remaining discrepancy vs website is due to dynamic bounding box adjustment, not a bug."}
{"id":"fredy-ch-9eo","title":"Improve __INITIAL_STATE__ regex parsing robustness","description":"The regex for extracting __INITIAL_STATE__ from HTML uses a non-greedy pattern:\n`/window.__INITIAL_STATE__\\s*=\\s*(\\{[\\s\\S]*?\\});\\s*\u003c\\/script\u003e/`\n\nThe `*?` non-greedy match could fail on complex nested JSON (stops at first `}`).\n\n**Current behavior:** Works in testing but fragile.\n\n**Potential fix:** \n- Use a proper JSON parser approach (find opening brace, count braces until balanced)\n- Or use a more robust regex with lookahead\n\n**Location:** lib/provider/immoscout24ch.js, extractInitialStateFromHtml function","status":"open","priority":4,"issue_type":"task","owner":"gabkolistiak@gmail.com","created_at":"2026-01-12T17:30:27.575076+01:00","created_by":"Gabko14","updated_at":"2026-01-12T17:30:27.575076+01:00"}
{"id":"fredy-ch-cia","title":"Update ImmoScout24.ch provider with anti-bot bypass","description":"Update the existing immoscout24ch.js provider to use residential proxy + 2Captcha fallback for DataDome bypass. Extract listings from window.__INITIAL_STATE__. This depends on proxy and captcha solver being implemented first.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-11T00:52:30.55283+01:00","created_by":"gabko14","updated_at":"2026-01-11T17:36:23.924472+01:00","closed_at":"2026-01-11T17:36:23.924472+01:00","close_reason":"Updated ImmoScout24.ch provider to extract listings from window.__INITIAL_STATE__ instead of HTML scraping. This is more reliable and provides richer data. Includes full DataDome captcha handling with 2Captcha integration.","dependencies":[{"issue_id":"fredy-ch-cia","depends_on_id":"fredy-ch-kqw","type":"blocks","created_at":"2026-01-11T00:52:49.390809+01:00","created_by":"gabko14"},{"issue_id":"fredy-ch-cia","depends_on_id":"fredy-ch-7tj","type":"blocks","created_at":"2026-01-11T00:52:50.498556+01:00","created_by":"gabko14"}]}
{"id":"fredy-ch-cnp","title":"Research: RonOrp coverage for Bern area","description":"RESEARCH FIRST: Evaluate if RonOrp (ronorp.net) is worth implementing for Bern area.\n\nRonOrp is a Z√ºrich-based community marketplace. While it's a 'Geheimtipp' for early private listings in Z√ºrich, we need to verify:\n\nQuestions to answer BEFORE implementing:\n1. Does RonOrp have meaningful Bern coverage? (It's Z√ºrich-focused)\n2. How many Bern-area listings exist?\n3. Are listings actually posted here before major portals?\n4. Is the effort worth it for limited geographic coverage?\n\nIf research shows poor Bern coverage: CLOSE this issue.\nIf research shows good coverage: Convert to feature and implement.\n\nTechnical notes (if we proceed):\n- Likely static HTML (simpler than SMG portals)\n- Base URL: https://www.ronorp.net","status":"open","priority":4,"issue_type":"task","created_at":"2026-01-08T21:45:55.5284251+01:00","created_by":"GLi","updated_at":"2026-01-08T21:57:11.5894593+01:00"}
{"id":"fredy-ch-dg6","title":"Implement Newhome.ch provider","description":"Create a provider for Newhome.ch, owned by Swiss Kantonalbanken and AXA. Often has exclusive listings from cantonal banks that don't appear on SMG platforms.\n\nLower priority because:\n- Smaller inventory than big 3\n- May have significant overlap\n- But worth having for exclusive Kantonalbank properties\n\nTechnical notes:\n- Requires JavaScript rendering\n- Base URL: https://www.newhome.ch","status":"open","priority":3,"issue_type":"feature","created_at":"2026-01-08T21:45:42.4821617+01:00","created_by":"GLi","updated_at":"2026-01-08T21:45:42.4821617+01:00"}
{"id":"fredy-ch-epl","title":"Change default admin password on production","status":"closed","priority":1,"issue_type":"chore","created_at":"2026-01-11T16:28:57.722183+01:00","created_by":"gabko14","updated_at":"2026-01-12T13:25:55.485811+01:00","closed_at":"2026-01-12T13:25:55.485811+01:00","close_reason":"Password changed via production UI"}
{"id":"fredy-ch-ivm","title":"Refactor Homegate provider to use Bright Data Web Unlocker","description":"## Context\n\nThe current Homegate provider uses Puppeteer with stealth plugin, but Homegate's Cloudflare protection is too aggressive:\n- Headless browsers get outright blocked (\"Sie wurden gesperrt\")\n- Visible browsers get a slider captcha challenge\n- Even residential proxies (DataImpulse) with Swiss IPs get blocked\n\n## Solution\n\nUse Bright Data Web Unlocker instead (same approach as ImmoScout24.ch). Testing confirmed this works:\n\n```\nBRIGHT_DATA_TOKEN=\"...\" BRIGHT_DATA_ZONE=\"immoscout\" node test-homegate-brightdata.mjs\n‚úì Found 20 listings\nFirst listing: 4002086534 - City Pop ‚Äì Zuhause f√ºhlen in Bern\n```\n\nThe same `immoscout` zone works for Homegate since both are SMG platforms with identical `__INITIAL_STATE__` structure.\n\n## Implementation\n\n1. Copy the fetch-based approach from `immoscout24ch.js` to `homegate.js`\n2. Remove Puppeteer dependencies (puppeteer-extra, stealth plugin, botPrevention imports)\n3. Keep the `transformListing()` and helper functions (they're already correct)\n4. Update the `getListings()` function to use Bright Data API\n5. Keep `proxyRequired: false` since Bright Data handles everything\n\n## Test script for reference\n\nSee `test-homegate-brightdata.mjs` in repo root (can be deleted after implementation).\n\n## Notes\n\n- Homegate and ImmoScout24.ch share the same Bright Data zone (`immoscout`)\n- Both use identical `__INITIAL_STATE__` JSON structure\n- Cost: $1.50/CPM via Bright Data","status":"open","priority":2,"issue_type":"task","owner":"gabkolistiak@gmail.com","created_at":"2026-01-12T21:47:08.15923+01:00","created_by":"Gabko14","updated_at":"2026-01-12T21:47:08.15923+01:00"}
{"id":"fredy-ch-j01","title":"Investigate ImmoScout24.ch provider missing listings","description":"The ImmoScout24.ch provider is not returning all listings. When testing with a URL that should have ~50 listings, significantly fewer are extracted.\n\n**Possible causes to investigate:**\n1. Pagination ‚Äî __INITIAL_STATE__ may only contain first page (20 items default)\n2. Extraction path ‚Äî listings may be in a different location for some search types\n3. DataDome blocking ‚Äî some requests may be silently failing\n4. Filter/normalize dropping valid listings\n\n**Steps to debug:**\n1. Test with a known URL and count expected vs actual listings\n2. Check if __INITIAL_STATE__ contains all listings or just first page\n3. Verify the extraction path is correct for different search types\n4. Add logging to track how many listings are found at each pipeline stage\n\n**If bug confirmed:** Create follow-up issue for the fix.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-11T21:52:16.158629+01:00","created_by":"gabko14","updated_at":"2026-01-12T17:50:32.762671+01:00","closed_at":"2026-01-12T17:50:32.762671+01:00","close_reason":"Fixed in PR #11 - replaced Puppeteer + 2Captcha with Bright Data Web Unlocker","comments":[{"id":1,"issue_id":"fredy-ch-j01","author":"Gabko14","text":"## Investigation Session 2026-01-12\n\n### Root Cause Identified\nIP mismatch between Puppeteer and 2Captcha workers:\n- Our Puppeteer browser (via DataImpulse proxy) gets one IP\n- 2Captcha workers solving the DataDome captcha get a different IP\n- DataDome rejects the solved captcha cookie because IPs don't match\n\n### Attempted Fix #1: Sticky Sessions\nUsed __sessid parameter in proxy username to force named sticky session:\nac967032560cd288b86c__sessid.fredy1\n\n**Result:** Still failing with ERROR_CAPTCHA_UNSOLVABLE\n\nCurrent proxy exit IP: 79.177.157.193\n\n### Hypotheses for continued failure:\n1. Sticky sessions not cross-client - DataImpulse may require identical auth strings\n2. 2Captcha workers not using our proxy - They might use their own IPs\n3. Behavioral detection - DataDome detecting 2Captcha workers despite same IP\n\n### Code changes deployed:\n- jobExecutionService.js: Fetch fresh settings each job run\n- dataDomeSolver.js: Skip interstitial pages, add debug logging\n- immoscout24ch.js: Log proxy exit IP, handle interstitials by reloading\n\n### Next steps:\n- Check 2Captcha dashboard for worker IP addresses\n- Verify if DataImpulse sticky sessions work across different HTTP clients\n- Consider alternative: Use 2Captcha built-in proxy handling","created_at":"2026-01-12T12:29:01Z"},{"id":2,"issue_id":"fredy-ch-j01","author":"Gabko14","text":"## 2Captcha Dashboard Analysis (2026-01-12 13:15)\n\n### Confirmed: IP Mismatch is the Root Cause\n\nChecked 2Captcha statistics page. Found captchas ARE being solved successfully:\n- ID 81613699195: SOLVED in 17 sec\n- ID 81613623313: SOLVED\n\nBut they fail because:\n- All 2Captcha workers use IP: **208.77.244.75**\n- Our Puppeteer on Railway uses IP: **79.177.157.193**\n\n### Why Sticky Sessions Don't Work\n\nThe `__sessid.fredy1` parameter creates sticky sessions per-connection-origin:\n- 2Captcha workers connect from their servers ‚Üí routed to exit IP A\n- Railway connects from its servers ‚Üí routed to exit IP B\n\nDataImpulse can't give both the same IP because they're connecting from different geographic locations/networks.\n\n### Possible Solutions\n\n1. **Static residential IP** - Get a dedicated IP that both can use\n2. **Different proxy architecture** - Use SOCKS5 or tunnel that maintains true session\n3. **Solve captcha in same session** - Have Puppeteer solve it itself (defeats purpose)\n4. **Find proxy with global sticky sessions** - Some providers offer this\n5. **Accept lower success rate** - Sometimes IPs might match by luck","created_at":"2026-01-12T12:34:50Z"},{"id":4,"issue_id":"fredy-ch-j01","author":"Gabko14","text":"## No-Proxy Test Results (2026-01-12 15:23)\n\n### Test: Direct Connection Without Proxy\n\nChanged `USE_PROXY = false` in immoscout24ch.js to test if Railway's direct IP works.\n\n### Results: FAILED\n\n- Railway's direct IP: `208.77.244.75`\n- DataDome immediately triggered captcha/interstitial\n- Cannot solve captcha without proxy (2Captcha workers would have different IPs)\n\n### Key Finding\n\nRailway's IP (`208.77.244.75`) is in the **same datacenter range** as 2Captcha workers! This explains why they were getting the same IP - they're both in similar cloud infrastructure.\n\nDataDome blocks datacenter IPs on sight - residential proxy is required.\n\n### Conclusion\n\nFree/no-proxy approach doesn't work for ImmoScout24.ch. Need static residential IP.\n\n### Next Steps\n\n1. Get IPRoyal static residential proxy (~$2.40/mo)\n2. Configure in Fredy settings\n3. Both Puppeteer and 2Captcha will use same static IP\n4. No more IP mismatch problem","created_at":"2026-01-12T15:27:06Z"},{"id":5,"issue_id":"fredy-ch-j01","author":"Gabko14","text":"## Decision: Use Bright Data Web Unlocker (2026-01-12)\n\n### Services Tested\n- ‚ùå IPRoyal Web Unblocker - ImmoScout24.ch not supported\n- ‚ùå ZenRows - Doesn't work with ImmoScout24.ch\n- ‚ùå Scrapfly - Doesn't work with ImmoScout24.ch  \n- ‚úÖ **Bright Data Web Unlocker** - WORKS!\n\n### Why Bright Data\n- Industry leader, specifically handles DataDome\n- User tested and confirmed it works with ImmoScout24.ch\n- ~$1.80/month for expected usage (~600 requests/month)\n\n### Implementation Plan\n1. Rewrite ImmoScout24.ch provider to use Bright Data API\n2. Remove Puppeteer dependency for this provider\n3. Remove 2Captcha dependency for this provider\n4. Simpler code: HTTP request ‚Üí parse HTML ‚Üí extract __INITIAL_STATE__\n\n### Why This Fixes the Problem\n- Bright Data handles everything on their infrastructure\n- Same IP for browsing AND captcha solving (internal)\n- No more IP mismatch between Puppeteer and 2Captcha","created_at":"2026-01-12T15:55:50Z"},{"id":6,"issue_id":"fredy-ch-j01","author":"Gabko14","text":"## Fix Implemented (2026-01-12)\n\nPR #11 replaces Puppeteer + 2Captcha with Bright Data Web Unlocker.\n\n**Testing results:**\n- Local test with Bern rentals URL: 20 listings found successfully\n- Code simplified from ~400 lines to ~100 lines\n\n**Next steps:**\n- Merge PR\n- Deploy to Railway\n- Configure Bright Data credentials in settings UI\n- Close this issue once verified in production","created_at":"2026-01-12T16:36:12Z"}]}
{"id":"fredy-ch-kqw","title":"Add residential proxy support to Fredy","description":"Add configuration option for residential proxy (URL format like http://user:pass@host:port). This is needed to bypass anti-bot protection on sites like ImmoScout24.ch. Integrate with existing puppeteerExtractor.js which already has proxyUrl support.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-11T00:52:28.440236+01:00","created_by":"gabko14","updated_at":"2026-01-11T02:09:21.253134+01:00","closed_at":"2026-01-11T02:09:21.253134+01:00","close_reason":"Residential proxy support implemented and verified working. Traffic routes through DataImpulse proxy (confirmed IP 194.230.147.57). DataDome still shows captcha challenge - requires 2Captcha integration (fredy-ch-7tj) to complete bypass."}
{"id":"fredy-ch-lqp","title":"Implement Flatfox.ch provider","description":"Create a provider for Flatfox.ch, a Swiss real estate platform owned by SMG. Flatfox is FREE for landlords to list, which means it often has unique private listings that don't appear on paid platforms like Homegate/ImmoScout24.\n\nüéØ RECOMMENDED FIRST: Start with Flatfox because it's reportedly scraper-friendly. Success here validates our approach for other SMG portals.\n\nTarget: Rental apartments in Switzerland (focus on Bern area initially).\n\nTechnical notes:\n- Likely requires JavaScript rendering (Puppeteer)\n- SMG-owned, so patterns may transfer to ImmoScout24.ch/Homegate\n- Base URL: https://www.flatfox.ch\n\n‚ö†Ô∏è Risks to watch:\n- SMG may have bot detection across portals (German ImmoScout24.de did)\n- If blocked, may need to investigate API or adjust approach\n\nTesting:\n- Capture sample HTML responses for test mocks\n- Reference existing German provider tests for patterns (e.g., test/provider/immowelt.test.js)","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-08T21:44:40.3561074+01:00","created_by":"GLi","updated_at":"2026-01-09T10:38:00.1896394+01:00","closed_at":"2026-01-09T10:38:00.1896394+01:00","close_reason":"Implemented Flatfox.ch provider using public API (pin + public-listing endpoints). Test passes with 100 listings."}
{"id":"fredy-ch-lu4","title":"Post only German links to Telegram","status":"open","priority":2,"issue_type":"feature","owner":"gabkolistiak@gmail.com","created_at":"2026-01-15T00:11:16.770036+01:00","created_by":"Gabko14","updated_at":"2026-01-15T00:11:16.770036+01:00"}
{"id":"fredy-ch-o2w","title":"Implement Homegate.ch provider","description":"Create a provider for Homegate.ch, Switzerland's market leader in real estate with ~9 million visits/month and ~35,000-45,000 active listings.\n\n‚ö†Ô∏è EXPECTED OVERLAP: Homegate is owned by SMG (same as ImmoScout24.ch and Flatfox). Professional landlords use SMG's Business Manager to post to ALL THREE platforms simultaneously. Expect 60-80% duplicate listings with ImmoScout24.ch.\n\nWhy implement anyway:\n- Fredy's similarity-check handles deduplication\n- Some landlords may only post on Homegate\n- Completeness for users who want maximum coverage\n- P2 priority reflects this 'nice to have' status\n\nTechnical notes:\n- Requires JavaScript rendering (Puppeteer)\n- Similar structure to other SMG portals (may share patterns with Flatfox/ImmoScout24.ch)\n- Base URL: https://www.homegate.ch","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-08T21:45:30.8731736+01:00","created_by":"GLi","updated_at":"2026-01-12T16:18:43.749746+01:00","closed_at":"2026-01-12T16:18:43.749746+01:00","close_reason":"Homegate provider implemented with unit tests","comments":[{"id":3,"issue_id":"fredy-ch-o2w","author":"Gabko14","text":"Implementation complete. Key findings:\n- Homegate uses same __INITIAL_STATE__ structure as ImmoScout24.ch (both SMG)\n- Cloudflare bot protection blocks headless browsers without residential proxy\n- Unit tests pass; integration tests require proxy (same pattern as ImmoScout24.ch)\n- Provider marked proxyRequired: false but may need proxy in practice for some IPs","created_at":"2026-01-12T15:18:38Z"}]}
{"id":"fredy-ch-q0p","title":"Implement ImmoScout24.ch provider","description":"Create a provider for ImmoScout24.ch, Switzerland's largest real estate platform.\n\nIMPORTANT: Swiss ImmoScout24.ch (SMG) is a COMPLETELY DIFFERENT company from German ImmoScout24.de (Scout24 SE). They share no code, APIs, or infrastructure. Do NOT assume German patterns will work.\n\nImmoScout24.ch is owned by SMG Swiss Marketplace Group and has ~40,000-50,000 active listings nationally.\n\nTechnical approach:\n- Start with HTML scraping via Puppeteer (proven approach)\n- Investigate if any public API exists (unlikely, but check)\n- Use German provider only as structural reference for Fredy patterns, NOT for site-specific logic\n- Base URL: https://www.immoscout24.ch","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-08T21:45:20.2028264+01:00","created_by":"GLi","updated_at":"2026-01-10T18:15:02.407385+01:00","closed_at":"2026-01-10T18:15:02.407385+01:00","close_reason":"Implemented ImmoScout24.ch provider with HTML scraping. Provider uses CSS selectors to extract listings. Note: Site has DataDome bot protection that blocks headless browsers in CI, so test is excluded from testGH."}
{"id":"fredy-ch-qf7","title":"ImmoScout: Filter out listings without price","status":"open","priority":2,"issue_type":"bug","owner":"gabkolistiak@gmail.com","created_at":"2026-01-15T00:11:18.389255+01:00","created_by":"Gabko14","updated_at":"2026-01-15T00:11:18.389255+01:00"}
{"id":"fredy-ch-s19","title":"Prices display incorrectly on listings page (showing ‚Ç¨ instead of CHF)","description":"On the listings page, prices are displayed incorrectly:\n- Showing values like '1 ‚Ç¨', '4 ‚Ç¨', '5 ‚Ç¨', '45 ‚Ç¨' instead of actual rental prices\n- Should be showing prices like '1'690 CHF', '2'500 CHF' etc.\n- Affects listings from both Flatfox and Immoscout24ch providers\n\nThis appears to be either:\n1. A display/formatting bug in the frontend\n2. A data parsing issue where only part of the price is extracted\n3. Currency symbol wrong (‚Ç¨ instead of CHF)\n\nScreenshot shows listings with prices that are clearly incorrect for Swiss apartment rentals.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-12T11:12:27.776776+01:00","created_by":"gabko14","updated_at":"2026-01-12T11:46:39.15289+01:00","closed_at":"2026-01-12T11:46:39.15289+01:00","close_reason":"Fixed in PR #8. extractNumber() now handles Swiss apostrophe thousand separator, frontend displays CHF instead of ‚Ç¨."}
{"id":"fredy-ch-vbs","title":"Add timeout to Bright Data API calls","description":"The fetch call to Bright Data API in immoscout24ch.js has no timeout. If Bright Data hangs, the request hangs forever.\n\n**Fix:** Add AbortController with reasonable timeout (e.g., 60 seconds).\n\n**Location:** lib/provider/immoscout24ch.js, getListings function, line ~250","status":"closed","priority":3,"issue_type":"task","owner":"gabkolistiak@gmail.com","created_at":"2026-01-12T17:30:18.627412+01:00","created_by":"Gabko14","updated_at":"2026-01-12T20:44:21.665065+01:00","closed_at":"2026-01-12T20:44:21.665065+01:00","close_reason":"Added 60s timeout to Bright Data API fetch using AbortController"}
{"id":"fredy-ch-w7l","title":"Fix job card button overflow on Jobs page","description":"The action buttons at the bottom of job cards are getting cut off/clipped when the card width is narrow. The fourth button (delete) is partially hidden. Need to improve responsive layout - either wrap buttons to multiple rows, use smaller buttons on narrow screens, or ensure minimum card width accommodates all buttons.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-10T17:31:46.363482+01:00","created_by":"gabko14","updated_at":"2026-01-10T17:41:28.522103+01:00","closed_at":"2026-01-10T17:41:28.522103+01:00","close_reason":"Fixed button overflow by adding flex-wrap: wrap and justify-content: center to .jobGrid__actions"}
{"id":"fredy-ch-wsp","title":"Sanitize locality in ImmoScout24.ch listing URLs","description":"The ImmoScout24.ch provider uses `address.locality` directly in URLs without sanitization:\n\n```javascript\nconst link = `...flat-rent-${address.locality?.toLowerCase() || 'switzerland'}/...`;\n```\n\nIf locality contains spaces or special characters (e.g., \"Z√ºrich HB\", \"St. Gallen\"), the URL becomes malformed and will 404.\n\n**Fix:**\n```javascript\nconst locality = (address.locality || 'switzerland')\n  .toLowerCase()\n  .replace(/[^a-z0-9]+/g, '-')  // Replace non-alphanumeric with dashes\n  .replace(/^-|-$/g, '');        // Trim leading/trailing dashes\n```\n\n**Location:** `lib/provider/immoscout24ch.js` line ~104 in `transformListing()`","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-11T18:01:29.019511+01:00","created_by":"gabko14","updated_at":"2026-01-11T18:05:48.95863+01:00","closed_at":"2026-01-11T18:05:48.95863+01:00","close_reason":"Fixed in PR #4 - added getPropertyTypeSlug() and sanitizeLocality() with 31 unit tests"}
{"id":"fredy-ch-yrq","title":"Fix ImmoScout24.ch listing URL format","description":"The generated listing URLs are broken. \n\n**Current (broken):**\n`https://www.immoscout24.ch/en/d/flat-rent-fribourg/4002189993`\n\n**Expected (working):**\n`https://www.immoscout24.ch/rent/4002189993`\n\n**Location:** lib/provider/immoscout24ch.js, line 204 in `transformListing()`:\n```javascript\nlink: `https://www.immoscout24.ch/en/d/${propertyType}-${offerType}-${locality}/${listingId}`,\n```\n\n**Fix:** Change URL format to match the actual ImmoScout24.ch URL structure.","status":"closed","priority":2,"issue_type":"bug","owner":"gabkolistiak@gmail.com","created_at":"2026-01-12T18:13:16.724341+01:00","created_by":"Gabko14","updated_at":"2026-01-12T20:11:05.975198+01:00","closed_at":"2026-01-12T20:11:05.975198+01:00","close_reason":"Fixed in PR #12"}
{"id":"fredy-ch-z4i","title":"Research: Swiss housing cooperatives (Genossenschaften)","description":"Investigate feasibility of monitoring Swiss housing cooperatives (Wohnbaugenossenschaften) and municipal housing.\n\nWhy this matters:\n- Genossenschaften offer 20-30% CHEAPER rents than market\n- Municipal housing also often below market rate\n- Often overlooked by apartment hunters\n- Not on major portals\n\n‚ö†Ô∏è CRITICAL QUESTION: Model compatibility\nMost operate on WAITING LISTS, not real-time vacancy listings:\n- You register, wait months/years, then get offered something\n- This may NOT fit Fredy's 'alert on new listings' model\n- Research must determine if any post real-time vacancies\n\nBern cooperatives to investigate:\n- EBG Bern (ebgbern.ch) - 700+ units, largest in Bern\n- Pro Domo Bern (wbgprodomo.ch) - 345 units\n- Baugenossenschaft Berna - ~200 units\n- WOGENO Bern (wogeno-bern.ch)\n\nAlso check municipal housing:\n- Stadt Bern (bern.ch/themen/wohnen/mietobjekte) - city-owned housing\n\nQuestions to answer:\n1. Do they post real-time vacancies? Or just waiting list registration?\n2. How often do new listings appear?\n3. Is scraping feasible (simple HTML vs login-required)?\n4. Would alerts even help if waiting list is the model?\n\nLIKELY OUTCOME: May not be suitable for Fredy. But worth verifying.","status":"closed","priority":4,"issue_type":"task","created_at":"2026-01-08T21:46:38.6186656+01:00","created_by":"GLi","updated_at":"2026-01-12T17:08:07.041673+01:00","closed_at":"2026-01-12T17:08:07.041673+01:00","close_reason":"Research complete: All cooperatives (EBG Bern, Pro Domo, WOGENO) use waiting list models with no public real-time listings. Stadt Bern municipal housing DOES post real-time listings, but they use ImmoScout24 as their platform - already covered by existing provider. No new provider needed."}
